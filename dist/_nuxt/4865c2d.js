(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{498:function(e,t,n){"use strict";n.r(t);var r=n(30),o=(n(113),n(29),n(12),n(67),n(219),n(114)),d=n.n(o),c=n(92);Object(c.d)("eager");var l={name:"jobs-table",data:function(){return{dialog:!1,dialogDelete:!1,components:{ValidationObserver:c.a,ValidationProvider:c.b},search:"",headers:[{text:"Posao",value:"name",align:"start"},{text:"ID",value:"id",align:" d-none"},{text:"Opis",value:"description",width:"20%"},{text:"Korisnik",value:"user"},{text:"Actions",value:"actions",sortable:!1}],items:[],editedIndex:-1,editedName:"",editedItem:{name:"",description:""},defaultItem:{name:"",description:"",user:""}}},mounted:function(){this.getJobs()},computed:{formTitle:function(){return-1===this.editedIndex?"Dodaj posao":"Uredi posao"}},watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},methods:{getJobs:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,i,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:e.$auth.strategy.token.get()}},t.next=3,d.a.get("http://pzi022022.studenti.sumit.sum.ba/backend/api/jobs",n).then((function(e){r=e.data,console.log(e.data)})).catch((function(e){console.log(e)}));case 3:i=0;case 4:if(!(i<r.length)){t.next=14;break}return o=void 0,c=r[i].user_id,t.next=9,d.a.get("http://pzi022022.studenti.sumit.sum.ba/backend/api/user/"+c,n).then((function(e){o=e.data.name})).catch((function(e){console.log(e)}));case 9:l={name:r[i].name,ID:r[i].id,description:r[i].description,user:o},e.items.push(l);case 11:i++,t.next=4;break;case 14:case"end":return t.stop()}}),t)})))()},deleteItem:function(e){this.editedIndex=this.items.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:e.$auth.strategy.token.get()}},t.next=3,d.a.delete("http://pzi022022.studenti.sumit.sum.ba/backend/api/admin/job/"+e.items[e.editedIndex].ID,n).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));case 3:e.items.splice(e.editedIndex,1),e.closeDelete();case 5:case"end":return t.stop()}}),t)})))()},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},editItem:function(e){this.editedIndex=this.items.indexOf(e),this.editedName=e.name,this.editedItem=Object.assign({},e),this.dialog=!0},update:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.editedIndex>-1?Object.assign(e.items[e.editedIndex],e.editedItem):e.items.push(e.editedItem),n={headers:{Authorization:e.$auth.strategy.token.get()}},t.next=4,d.a.put("http://pzi022022.studenti.sumit.sum.ba/backend/api/admin/job/"+e.editedItem.ID,e.editedItem,n).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));case 4:e.close();case 5:case"end":return t.stop()}}),t)})))()}}},m=n(97),v=n(135),f=n.n(v),h=n(424),x=n(208),I=n(112),k=n(438),_=n(445),V=n(591),w=n(603),D=n(426),O=n(423),j=n(442),y=n(443),C=n(500),T=n(73),R=n(449),component=Object(m.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-data-table",{staticClass:"elevation-1 my-table",attrs:{headers:e.headers,items:e.items,"items-per-page":5,search:e.search},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:""}},[n("v-toolbar-title",[e._v("Poslovi")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Pretra≈æi","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"text-h5"},[e._v(e._s(e.formTitle))])]),e._v(" "),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[n("ValidationObserver",{ref:"observer"},[n("ValidationProvider",{attrs:{name:"Ime posla",rules:"required|max:100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[n("v-text-field",{attrs:{counter:100,"error-messages":r,label:"Ime Posla"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})]}}])}),e._v(" "),n("ValidationProvider",{attrs:{name:"Opis posla",rules:"required|max:1000"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[n("v-text-field",{attrs:{counter:1e3,"error-messages":r,label:"Opis posla"},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})]}}])})],1)],1)],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("\n              Odustani\n            ")]),e._v(" "),"Uredi posao"===e.formTitle?n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.update}},[e._v("\n              Spremi\n            ")]):e._e()],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[e._v("Are you sure you want to delete this item?")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancel")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("OK")]),e._v(" "),n("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var r=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(r)}}},[e._v("\n      mdi-pencil\n    ")]),e._v(" "),n("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(r)}}},[e._v("\n      mdi-delete\n    ")])]}},{key:"no-data",fn:function(){return[n("v-btn",{attrs:{color:"primary"},on:{click:e.getJobs}},[e._v("\n      Reset\n    ")])]},proxy:!0}])})}),[],!1,null,"f966cf7c",null);t.default=component.exports;f()(component,{VBtn:h.a,VCard:x.a,VCardActions:I.a,VCardText:I.c,VCardTitle:I.d,VCol:k.a,VContainer:_.a,VDataTable:V.a,VDialog:w.a,VDivider:D.a,VIcon:O.a,VRow:j.a,VSpacer:y.a,VTextField:C.a,VToolbar:T.a,VToolbarTitle:R.a})}}]);